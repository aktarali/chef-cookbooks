# Generated by Chef for <%= node["fqdn"] %>.
# Local modifications will be overwritten.

<% if node["percona"]["backup"]["configure"] %>
# create Ping SaaS DB and grant relevant perms.
GRANT RELOAD, LOCK TABLES, REPLICATION CLIENT ON *.* TO '<%= node["percona"]["backup"]["username"] %>'@'localhost' IDENTIFIED BY '<%= @backup_password %>';
REVOKE ALL PRIVILEGES, GRANT OPTION FROM '<%= node["percona"]["backup"]["username"] %>'@'localhost';
GRANT RELOAD, LOCK TABLES, REPLICATION CLIENT ON *.* TO '<%= node["percona"]["backup"]["username"] %>'@'localhost' IDENTIFIED BY '<%= @backup_password %>';
CREATE database SaaS;
GRANT ALL PRIVILEGES ON SaaS.* TO 'pingsaas'@'10.135.%' IDENTIFIED BY '<%= @backup_password %>' WITH GRANT OPTION;
GRANT ALL PRIVILEGES ON SaaS.* TO 'pingsaas'@'localhost' IDENTIFIED BY '<%= @backup_password %>' WITH GRANT OPTION;
<% end -%>

SET PASSWORD FOR 'root'@'localhost' = PASSWORD('<%= @root_password %>');
SET PASSWORD FOR 'root'@'127.0.0.1' = PASSWORD('<%= @root_password %>');

FLUSH PRIVILEGES;
